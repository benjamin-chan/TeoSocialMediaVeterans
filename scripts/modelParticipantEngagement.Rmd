# Model participant engagement


## Primary Outcomes
  
* Survey participation (i.e., completed the full survey and eligible for analysis)
  * `indSurveyParticipation == 1`
* Eligibility screener participation (i.e., completed the first part of the survey assessing eligibility)
  * `indScreenerParticipation == 1`
* Rationale: These outcomes represents the highest level of engagement involving an "action step outside of Facebook" as described in the spectrum of Facebook engagement outcomes described by [Platt T 2016]
* Proportion of survey participants who screen positive for suicidality 
* Proportion of survey participants who used VA health services in the prior 12 months

**Model**

* Use logistic regression model
* Predictor variables
  * Ad `image`
  * Ad `text`
* Include full factorial interaction

Define the linear predictor as $\eta$, where

$$
\begin{align*}
\eta = & \beta_0 + \\\\
       & \beta_1 x_\text{image: Family} + 
         \beta_2 x_\text{image: Veteran} + \\\\
       & \beta_3 x_\text{text: Altruism} + 
         \beta_4 x_\text{text: Empowerment} + 
         \beta_5 x_\text{text: Sharing} + 
         \beta_6 x_\text{text: Social norms} + \\\\
       & \gamma_1 x_\text{image: Family} x_\text{text: Altruism} + 
         \gamma_2 x_\text{image: Family} x_\text{text: Empowerment} +  \\\\
       & \gamma_3 x_\text{image: Family} x_\text{text: Sharing} + 
         \gamma_4 x_\text{image: Family} x_\text{text: Social norms} + \\\\
       & \gamma_5 x_\text{image: Veteran} x_\text{text: Altruism} + 
         \gamma_6 x_\text{image: Veteran} x_\text{text: Empowerment} +  \\\\
       & \gamma_7 x_\text{image: Veteran} x_\text{text: Sharing} + 
         \gamma_8 x_\text{image: Veteran} x_\text{text: Social norms}
\end{align*}
$$

The model for survey and screener participation is

$$
\text{logit}(y) = \eta
$$


### Survey participation

```{r indSurveyParticipation}
y <- "indSurveyParticipation"
title <- "Survey participation"
M <- modelBinomial(y)
print(M$model, showEnv = FALSE)
M$pred %>% kable(digits = 2)
M[["modelObject"]] %>% contrastTable %>% kable(digits = 3)
```

Ad hoc testing

**Incentive, Sharing, Altruism, or Empowerment vs Social Norms** regardless of `image`

```{r}
M <-
  df2 %>% 
  mutate(x = text %in% c("Incentive", "Sharing", "Altruism", "Empowerment")) %>% 
  glm(indSurveyParticipation ~ x, data = ., family = binomial(link = "logit"))
M %>% tidy %>% kable(digits = 3)
M %>% predictDichotomousRiskFactor %>% kable(digits = 2)
```


### Screener participation

```{r indScreenerParticipation}
y <- "indScreenerParticipation"
title <- "Screener participation"
M <- modelBinomial(y)
print(M$model, showEnv = FALSE)
M$pred %>% kable(digits = 2)
M[["modelObject"]] %>% contrastTable %>% kable(digits = 3)
```

Ad hoc testing

**Incentive or Sharing vs Empowerment, Altruism, or Social Norms** regardless of `image`

```{r}
M <-
  df2 %>% 
  mutate(x = text %in% c("Incentive", "Sharing")) %>% 
  glm(indScreenerParticipation ~ x, data = ., family = binomial(link = "logit"))
M %>% tidy %>% kable(digits = 3)
M %>% predictDichotomousRiskFactor %>% kable(digits = 2)
```


### Suicidality 

```{r indDSISS}
y <- "indDSISS"
title <- "Suicidality"
M <- modelBinomial(y)
print(M$model, showEnv = FALSE)
M$pred %>% kable(digits = 2)
M[["modelObject"]] %>% contrastTable %>% kable(digits = 3)
```

Ad hoc testing

**Family-Empowerment or Computer-Incentive vs other**

```{r}
M <-
  df2 %>% 
  mutate(x = (image == "Family" & text == "Empowerment") | 
             (image == "Computer" & text == "Incentive")) %>% 
  glm(indDSISS ~ x, data = ., family = binomial(link = "logit"))
M %>% tidy %>% kable(digits = 3)
M %>% predictDichotomousRiskFactor %>% kable(digits = 2)
```

**Computer vs Family or Veteran** regardless of `text`

```{r}
M <-
  df2 %>% 
  mutate(x = image == "Computer") %>% 
  glm(indDSISS ~ x, data = ., family = binomial(link = "logit"))
M %>% tidy %>% kable(digits = 3)
M %>% predictDichotomousRiskFactor %>% kable(digits = 2)
```


### Use of VA health services 

```{r va_use_12mo}
y <- "va_use_12mo"
title <- "Use of VA health services in prior 12 months"
M <- modelBinomial(y)
print(M$model, showEnv = FALSE)
M$pred %>% kable(digits = 2)
M[["modelObject"]] %>% contrastTable %>% kable(digits = 3)
```


## Secondary Outcomes

**Not sure how to analyze these; these variables do not appear in the REDCap survey data set**

* Link clicks (survey only)
* Link clicks (total)
