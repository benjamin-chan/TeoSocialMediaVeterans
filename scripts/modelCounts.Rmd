# Model counts

Use negative binomial model.


## Total clicks

```{r}
M <-
  df %>% 
  glm.nb(clicksTotal ~ adImage + adText + adImage * adText + offset(log(impressions)), 
         data = .)
tidy(M) %>% kable(digits = 3)
summary(M)
anova(M)
df %>% 
  group_by(adImage, adText) %>% 
  summarize(predMean = mean(pred),
            predSD = sd(pred),
            residMean = mean(resid),
            residSD = sd(resid)) %>% 
  arrange(-predMean) %>% 
  kable(digits = c(0, 0, 1, 1, 2, 2))
```

Image files saved as [PNG](../figures/residClicksTotal.png), [SVG](../figures/residClicksTotal.svg)

![residClicksTotal.png](../figures/residClicksTotal.png)

```{r residClicksTotal, fig.show = "hide"}
df <-
  df %>% 
  mutate(pred = predict(M, type = "response"),
         resid = resid(M, type = "response"))
G <- plotResid("resid", "Number of ad clicks")
```

